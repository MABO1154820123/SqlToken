name: Scheduled Request

on:
  schedule:
    - cron: '*/4 * * * *'  # 每 4 分钟执行一次
  workflow_dispatch:  # 允许手动触发

jobs:
  send-request:
    runs-on: ubuntu-latest
    
    # 注意：在实际使用时，需要在GitHub仓库的Settings > Secrets and variables > Actions中设置以下密钥
    # - SQL_API_KEY: API密钥（如果需要）
    # - SQL_BEARER_TOKEN: Bearer令牌（如果需要）
    # - SQL_USERNAME: 用户名（如果需要）
    # - SQL_PASSWORD: 密码（如果需要）
    
    # env:
      # 可选的认证环境变量，根据实际API要求启用
      # SQL_API_KEY: ${{ secrets.SQL_API_KEY }}
      # SQL_BEARER_TOKEN: ${{ secrets.SQL_BEARER_TOKEN }}
      # SQL_USERNAME: ${{ secrets.SQL_USERNAME }}
      # SQL_PASSWORD: ${{ secrets.SQL_PASSWORD }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Install dependencies
        run: pip install requests

      - name: Send request and save response
        run: python send_request.py
